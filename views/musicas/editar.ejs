<!DOCTYPE html>
<html>
  <head>
    <title>Catalago de Musicas</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/global.css" />
  </head>

  <body>
    <div class="container">
      <%- include ('../partials/navbar');%>

      <br />
      <div class="card">
        <div class="card-body card__body__style">
          <h3 class="card-title title__h3">Cadastro de Musicas</h3>
          <form action="/musicas/atualizar" method="POST">
            <div class="form-group">
              <label for="titulo" class="style__label"
                >Título da Musica</label
              >
              <input
                type="text"
                name="titulo"
                id="titulo"
                value="<%=musica.titulo%>"
                placeholder="Informe o Título da Musica."
                class="form-control"
                required
              />
            </div>
            <div class="form-group">
              <label for="ano" class="style__label">Ano Lançamento</label>
              <input
                type="number"
                name="ano"
                id="ano"
                value="<%=musica.ano%>"
                placeholder="Informe o Ano de Lançamento."
                class="form-control"
                required
              />
            </div>
            <div class="form-group">
              <label for="artista" class="style__label">Artistas</label>
              <select id="artista" name="artista" class="form-control" required>
                <!-- Montando o select das categorias usando o forEach -->
                <option value=""></option>
                <% artistas.forEach(function(artista){ if(artista.id == musica.artistaId) { %>
                <option value="<%=artista.id%>" selected>
                  <%=artista.nome%>
                </option>
                <%} else{%>
                <option value="<%=artista.id%>"><%=artista.nome%></option>
                <%}%> <%})%>
              </select>
            </div>
            <div class="form-group">
              <label for="genero" class="style__label">Genero</label>
              <select id="genero" name="genero" class="form-control" required>
                <option value=""></option>
                <% generos.forEach(function(genero){ if(genero.id == musica.generoId) { %>
                <option value="<%=genero.id%>" selected>
                  <%=genero.descricao%>
                </option>
                <%} else{%>
                <option value="<%=genero.id%>"><%=genero.descricao%></option>
                <%}%> <%})%>
              </select>
            </div>
            <input type="hidden" name="id" value="<%=musica.id%>" />
            <input class="btn btn-success" type="submit" value="Salvar" />
            <a href="/musicas/lista" class="btn btn-outline-success"
              >Listar Músicas</a
            >
          </form>
          <% if(mensagem){ %>
          <div class="alert alert-danger mt-4">
            <strong>Alerta! </strong> <%= mensagem %>
          </div>
          <% } %>
        </div>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script src="/js/bootstrap.min.js"></script>
  </body>
</html>


